
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jio Mudra ‚Äì Expatriate Module</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fc;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #001a70;
      color: #fff;
      padding: 1rem 2rem;
      font-size: 1.4rem;
    }
    nav {
      display: flex;
      gap: 1rem;
      background: #e6ecf5;
      padding: 0.75rem 2rem;
    }
    nav a {
      text-decoration: none;
      color: #001a70;
      font-weight: 500;
    }
    nav a.active {
      border-bottom: 2px solid #001a70;
    }
    .container {
      padding: 2rem;
    }
    .upload-section {
      margin-bottom: 1rem;
    }
    .upload-section input {
      padding: 0.5rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.75rem;
      text-align: left;
    }
    th {
      background-color: #f1f4f9;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-top: 2rem;
    }
    .card {
      background: #ffffff;
      border: 1px solid #dbe2ef;
      border-radius: 8px;
      padding: 1rem;
    }
    .card h3 {
      margin-top: 0;
      font-size: 1.1rem;
      color: #001a70;
    }
  </style>
</head>
<body>

<header>Expatriate ‚Äì Jio Mudra</header>
<a href="jiopagaar.html" class="back-btn">‚Üê Back to Menu</a>

<nav>
  <a href="#" class="tablink active" onclick="switchTab(event, 'inputTab')">Input Data</a>
  <a href="#" class="tablink" onclick="switchTab(event, 'analysisTab')">Analysis</a>
  <a href="#" class="tablink" onclick="switchTab(event, 'dashboardTab')">Dashboard</a>
</nav>

<div id="inputTab" class="container">
  <div class="actions" style="display: flex; gap: 1.5rem; margin-bottom: 1.5rem; align-items: center;">
    <div>
      <label for="excelUpload"><strong>Upload Excel:</strong></label><br />
      <input type="file" id="excelUpload" style="display: none;" />
      <button onclick="document.getElementById('excelUpload').click()" 
              style="padding: 0.5rem 1rem; background-color: #001a70; color: #fff; border: none; border-radius: 4px; cursor: pointer;">
        Choose File
      </button>
    </div>
    <div>
      <label><strong>Input Data Manually:</strong></label><br />
      <button onclick="addRow()" 
              style="padding: 0.5rem 1rem; background-color: #28a745; color: #fff; border: none; border-radius: 4px; cursor: pointer;">
        Add Row Manually
      </button>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>S No</th>
        <th>Emp ID</th>
        <th>Emp Name</th>
        <th>Position Name</th>
        <th>Country</th>
        <th>Category Tagging</th>
        <th>Joining Date</th>
        <th>Reporting Manager</th>
        <th>Contract Start Date</th>
        <th>Contract End Date</th>
        <th>CTC (in INR)</th>
        <th>Location</th>
      </tr>
    </thead>
    <tr>
  <td>5</td><td>TEST999</td><td>Test Flag</td><td>Tester</td><td>India</td><td>India OCI</td>
  <td>2024-05-01</td><td>Manager X</td><td>2024-05-01</td><td>2024-06-15</td><td>100000</td><td>Delhi</td>
</tr>
<tr>
        <td>1</td><td>EMP001</td><td>John Doe</td><td>Software Engineer</td><td>USA</td><td>USA Employee</td>
        <td>2022-01-15</td><td>Alice Brown</td><td>2022-01-15</td><td>2024-12-31</td><td>90000</td><td>New York</td>
      </tr>
      <tr>
        <td>2</td><td>EMP002</td><td>Emma Smith</td><td>Product Manager</td><td>India</td><td>India OCI</td>
        <td>2021-06-20</td><td>John Doe</td><td>2024-07-01</td><td>2026-06-30</td><td>120000</td><td>Mumbai</td>
      </tr>
      <tr>
        <td>3</td><td>EMP003</td><td>Michael Bro</td><td>Business Analyst</td><td>India</td><td>India Expat</td>
        <td>2022-03-10</td><td>Emma Wilson</td><td>2025-03-09</td><td>2027-03-08</td><td>110000</td><td>Bangalore</td>
      </tr>
      <tr>
        <td>4</td><td>EMP004</td><td>Sarah Johns</td><td>Consultant</td><td>UK</td><td>Consultant</td>
        <td>2022-11-05</td><td>Peter Clark</td><td>2023-11-04</td><td>2024-11-03</td><td>130000</td><td>London</td>
      </tr>
    </tbody>
  </table>

  <script>
    function addRow() {
      const table = document.querySelector('tbody');
      const newRow = document.createElement('tr');
      const rowCount = table.rows.length + 1;
      newRow.innerHTML = `
        <td>${rowCount}</td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
        <td contenteditable='true'></td>
      `;
      table.appendChild(newRow);
    }
  </script>
</div>

<div id="analysisTab" style="padding: 2rem; display: none;">
  <div class="card" style="grid-column: span 2; text-align: center; background: #fffbe6;">
    <h3>‚ö†Ô∏è Contracts Expiring in Next 45 Days</h3>
    <p style="font-size: 1.5rem; font-weight: bold; color: #b30000;" id="flagCount">0 Contracts</p>
  </div>
    <div class="card">
      <h3>Category-wise Analysis</h3>
      <table>
        <thead>
          <tr><th>Category Tagging</th><th>Headcount</th><th>INR Cost</th></tr>
        </thead>
        <tbody>
          <tr><td>USA Employee</td><td>1</td><td>90,000</td></tr>
          <tr><td>India OCI</td><td>1</td><td>1,20,000</td></tr>
          <tr><td>India Expat</td><td>1</td><td>1,10,000</td></tr>
          <tr><td>Consultant</td><td>1</td><td>1,30,000</td></tr>
        </tbody>
      </table>
    </div>

    <div class="card">
  <h3>Contract Closure Quarter</h3>
  <table>
    <thead>
      <tr>
        <th colspan="4">Contract Closure Quarter</th>
        <th colspan="4">FY 25</th>
        <th colspan="4">FY 26</th>
      </tr>
      <tr>
        <th></th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th>
        <th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>Total</td><td>3</td><td>0</td><td>6</td><td>15</td><td>3</td><td>3</td><td>5</td><td>1</td></tr>
    </tbody>
  </table>
</div>
    <div class="card">
      <h3>New Hires by Month</h3>
      <table>
        <thead>
          <tr><th>Month</th><th>FY 25</th><th>FY 26</th></tr>
        </thead>
        <tbody>
          <tr><td>Jan</td><td>2</td><td>1</td></tr>
          <tr><td>Feb</td><td>0</td><td>1</td></tr>
          <tr><td>Mar</td><td>1</td><td>2</td></tr>
          <tr><td>Apr</td><td>3</td><td>0</td></tr>
          <tr><td>May</td><td>0</td><td>2</td></tr>
          <tr><td>Jun</td><td>2</td><td>1</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div id="dashboardTab" style="padding: 2rem; display: none;">
  
    <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
      <div class="card" style="flex: 1; min-width: 200px; background-color: #e7f3ff;">
        <h3>Total Headcount</h3>
        <p style="font-size: 1.6rem; font-weight: bold; color: #003366;">5</p>
      </div>
      <div class="card" style="flex: 1; min-width: 200px; background-color: #e6ffee;">
        <h3>Total INR Spent</h3>
        <p style="font-size: 1.6rem; font-weight: bold; color: #006644;">‚Çπ6,50,000</p>
      </div>
      <div class="card" style="flex: 1; min-width: 200px; background-color: #fff4e6;">
        <h3>Contracts Expiring (45 days)</h3>
        <p style="font-size: 1.6rem; font-weight: bold; color: #b34700;">1 ‚ö†Ô∏è</p>
      </div>
      <div class="card" style="flex: 1; min-width: 200px; background-color: #f9e6ff;">
        <h3>Open Positions</h3>
        <p style="font-size: 1.6rem; font-weight: bold; color: #800080;">3</p>
      </div>
    </div>
    <div class="card">
      <h3>üìç Country-wise Headcount & Cost</h3>
      <table>
        <thead>
          <tr><th>Country</th><th>Headcount</th><th>Total INR</th></tr>
        </thead>
        <tbody>
          <tr><td>India</td><td>3</td><td>3,30,000</td></tr>
          <tr><td>USA</td><td>1</td><td>90,000</td></tr>
          <tr><td>UK</td><td>1</td><td>1,30,000</td></tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h3>üìà Monthly Hires vs Exits</h3>
      <table>
        <thead>
          <tr><th>Month</th><th>New Hires</th><th>Exits</th></tr>
        </thead>
        <tbody>
          <tr><td>Apr</td><td>2</td><td>0</td></tr>
          <tr><td>May</td><td>1</td><td>1</td></tr>
          <tr><td>Jun</td><td>3</td><td>2</td></tr>
        </tbody>
      </table>
    </div>

    <div class="card" style="grid-column: span 2;">
      <h3>üß† Strategic Insight Panel</h3>
      <ul>
        <li><strong>India</strong> continues to hold the largest share of expats (60%).</li>
        <li><strong>High Cost Concentration</strong> observed in UK with fewer headcount.</li>
        <li>‚ö†Ô∏è <strong>2 contracts</strong> are expiring next month. Renewal recommended.</li>
        <li>üìä Hiring trends upward; consider proactive onboarding plan for Q2.</li>
      </ul>
    </div>
  </div>
</div>
</div>
</div>
<script>
function switchTab(evt, tabId) {
  const tabLinks = document.querySelectorAll('.tablink');
  tabLinks.forEach(link => link.classList.remove('active'));
  evt.currentTarget.classList.add('active');

  const tabs = ['inputTab', 'analysisTab', 'dashboardTab'];
  tabs.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = (id === tabId) ? 'block' : 'none';
  });
}
document.getElementById('inputTab').style.display = 'block';

function highlightExpiringContracts() {
  let flaggedCount = 0;
  const rows = document.querySelectorAll("#inputTab tbody tr");
  const today = new Date();

  rows.forEach(row => {
    const endDateCell = row.cells[9]; // 10th column: Contract End Date
    if (!endDateCell) return;

    const endDateStr = endDateCell.textContent.trim();
    const endDate = new Date(endDateStr);
    if (isNaN(endDate)) return; // skip invalid dates

    const diffTime = endDate - today;
    const diffDays = diffTime / (1000 * 60 * 60 * 24);

    if (diffDays >= 0 && diffDays <= 45) {
    endDateCell.style.backgroundColor = "#ffe0e0";
    endDateCell.style.fontWeight = "bold";
    endDateCell.innerHTML += " ‚ö†Ô∏è";
    flaggedCount++;
  }
  });
}

window.onload = function () {
  document.getElementById('inputTab').style.display = 'block';
  highlightExpiringContracts();
  document.getElementById('flagCount').textContent = flaggedCount + ' Contracts';
};
</script>
</body>
</html>
